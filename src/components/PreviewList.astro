---
import { getEntry, render } from "astro:content";
import PreviewElement from "./PreviewElement.astro";
import { getCollection } from "astro:content";

type CollectionName = keyof import("astro:content").DataEntryMap;

type Props = {
  collectionName: CollectionName;
};

const { collectionName } = Astro.props;

const collection = await getCollection(collectionName);

if (!collection) {
  throw new Error(`${collectionName} collection not found`);
}

const previews = collection.map((element) => element.data);
---

<div class="flex flex-col gap-15">
  {previews.map((preview) => <PreviewElement {...preview} />)}
</div>
